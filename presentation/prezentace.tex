\documentclass{beamer}
\usepackage{hyperref}
\usepackage[czech]{babel}

%\usetheme{Boadilla}
\usetheme{default}
\usecolortheme{seahorse}
\definecolor{myblue}{rgb}{0.2, 0.2, 0.6}
\setbeamertemplate{caption}{{\color{myblue}Obrázek:} \raggedright\insertcaption\par}
\setbeamertemplate{footline}[frame number] 

\newcommand{\authorname}{Dluhoš Matěj, Gaja Jan, Gajdošík Petr, Jurásek Petr, Phan Thanh Tú, Jan Rádl}
\newcommand{\authorsshort}{Dluhoš, Gaja, Gajdošík, Jurásek, Phan, Rádl}
\newcommand{\thesisname}{PDS: Python}

\title{\thesisname}
\author{\authorname}
\institute{Univerzita Palackého v Olomouci}
\date{\today}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{headline}{}
\setbeamertemplate{footline}{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.4\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\authorsshort
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\thesisname
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
  \end{beamercolorbox}}%
  \vskip0pt%
}

%\logo{\includegraphics[height=1cm]{UP_logo.png}}
\usepackage{tikz}
\addtobeamertemplate{headline}{}{%
    \begin{tikzpicture}[overlay, remember picture]
    	\ifnum\insertframenumber>1
        	\node[anchor=north east, inner sep=5pt] at (current page.north east) {\includegraphics[height=1cm]{obrazky/UP_logo.png}};
        \fi
    \end{tikzpicture}
}

\setbeamercolor{titlelike}{bg=,fg=}

\begin{document}

\begin{frame}
	\titlepage
\end{frame}

\begin{frame}{Obsah}
	\tableofcontents
\end{frame}

\section{Úvod do Pythonu s paralelismem}
\subsection{Historie a zaměření}
\begin{frame}{Historie a zaměření}
	\begin{itemize}
		\item Vytvořen \textbf{Guidem van Rossumem} v roce \textbf{1991}.
	\end{itemize}
	\begin{itemize}
		\item Jednoduchost a čitelnost kódu.
		\item Vysoká produktivita programátorů.
		\item Univerzální použití: od webových aplikací přes vědecké výpočty až po strojové učení.
	\end{itemize}
\end{frame}

\subsection{Paralelismus v Pythonu}
\begin{frame}{Paralelismus v Pythonu}
	\begin{itemize}
		\item Python získal základní podporu paralelismu prostřednictvím vláken ve verzi 1.5.2 (1999).
		\item Zaveden \textbf{GIL} (Global Interpreter Lock)
		\begin{itemize}
			\item [\textendash] Usnadnilo integraci nativního kódu v C.
			\item [\textendash] Vyřešilo problémy s přístupem ke sdíleným datům ve více vláknech.
			\item [\textendash] Optimalizovalo výkon na systémech s jedním jádrem.
			\item [\textendash] Omezuje paralelní výkon na vícejádrových procesorech.
			\item [\textendash] Vede k neefektivnímu využití vláken u \textbf{CPU-bound} úloh.
			\item [\textendash] \hypersetup{urlcolor=blue} \href{https://peps.python.org/pep-0703/}{PEP 703} - Making the Global Interpreter Lock Optional in CPython 
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection{Proč odstranit GIL?}
\begin{frame}{Proč odstranit GIL?}
	\begin{itemize}
		\item Většina zařízení dnes obsahuje vícejádrové procesory, kde GIL představuje významné omezení.
		\item Efektivnější paralelní výpočty, například v oblastech umělé inteligence nebo numerických simulacích.
		\item Výzvy při odstranění GIL:
		\begin{itemize}
			\item [\textendash] Potřeba bezpečného a efektivního spravování sdílené paměti (například více zamykání nebo jiných synchronizačních mechanismů).
			\item [\textendash] Zvýšení složitosti implementace interpretu Pythonu.
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection{Komunikační model Pythonu}
\begin{frame}{Komunikační model Pythonu}

\end{frame}

\section{Synchronizační nástroje standardní knihovny}
\subsection{Knihovna threading}
\begin{frame}{Knihovna threading}


\end{frame}

\subsection{Knihovna multiprocessing}
\begin{frame}{Knihovna multiprocessing}

\end{frame}

\subsection{Knihovna concurrent.futures}
\begin{frame}{Knihovna concurrent.futures}

\end{frame}

\subsection{Knihovna asyncio}
\begin{frame}{Knihovna asyncio}

\end{frame}

\section{Nástroje externích knihoven}
\begin{frame}{Nástroje externích knihoven}

\end{frame}

\section{Nástroje pro distribuované systémy}
\subsection{Knihovna socket}
\begin{frame}{Knihovna socket}
	\begin{itemize}
		\item Modul \texttt{socket} je základní nástroj pro implementaci síťové komunikace.
		\item Je \textbf{nízkoúrovňový} – jsou na něm založeny všechny ostatní moduly Pythonu vyšší úrovně pro propojení v síti.
		\item Podporuje většinu běžných protokolů, včetně TCP a UDP.
		\item \textbf{Výhody:}
		\begin{itemize}
			\item Přímá kontrola nad socketovou komunikací.
			\item Flexibilita pro implementaci vlastních protokolů.
		\end{itemize}
		\item \textbf{Nevýhody:}
		\begin{itemize}
			\item Vyžaduje znalosti síťových protokolů.
			\item Implementace složitější logiky (např. HTTPS) je náročnější.
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}{Knihovna socket - tvorba socketu}
	\begin{itemize}
		import socket

		socket = socket.socket(
			family=AF_INET,
			type=SOCK_STREAM
		)

		\item \texttt{family}  - určuje, jaký protokol se použije na síťové vrstvě.
		\begin{itemize}
			\item \texttt{socket.AF_INET} - pro IPv4 adresy.
			\item \texttt{socket.AF_INET6} - pro IPv6 adresy.
			\item \texttt{socket.AF_UNIX} - Unixový socket (pro lokální komunikaci mezi procesy).
		\end{itemize}
		\item \texttt{type} - určuje, jaký protokol se použije na transportní vrstvě.
		\begin{itemize}
			\item \texttt{socket.SOCK_STREAM} - používá TCP protokol.
			\item \texttt{socket.SOCK_DGRAM} - používá UDP protokol.
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}{Knihovna socket - odeslání zprávy}
	s.connect(('localhost', 12345)) # navázání spojení
	s.sendall(b'Ahoj!') #odešle všechna data
	s.close() # ukončí socket s
\end{frame}

\begin{frame}{Knihovna socket - poslouchání  a přijímání dat}
	addr = ('localhost', 12345) # adresa na které posloucháme
	s.bind(addr) # přiřadí socket k adrese
	s.listen() # umožňuje přijímat příchozí připojení
	conn, addr = s.accept() # čeká se na příchozí připojení
	print(f'Připojeno: {addr}')
	data = conn.recv(1024) #přijme data, max. 1024B
	conn.sendall(b'Ahoj!') # pošle odpověď
	conn.close() # ukončí socket conn
	s.close() # ukončí socket s
\end{frame}

\subsection{Knihovna http.server}
\begin{frame}{Knihovna http}
	\begin{itemize}
		\item Modul \texttt{http} v Pythonu poskytuje nástroje pro práci s protokolem HTTP.
		\item Je rozdělen na několik podmodulů:
		\begin{itemize}
			\item Mezi ně patří např.: \texttt{http.client}, \texttt{http.server}, \texttt{http.cookies} \ldots
		\end{itemize}
		\item Využívá ho mnoho vyšších knihoven, jako je \texttt{requests} nebo \texttt{flask}.
		\item \textbf{Výhody:}
		\begin{itemize}
			\item Vyšší úroveň abstrakce.
			\item Snazší implementace běžných HTTP funkcionalit.
		\end{itemize}
		\item \textbf{Nevýhody:}
		\begin{itemize}
			\item Omezená flexibilita ve srovnání s nízkoúrovňovou komunikací pomocí \texttt{socket}.
		\end{itemize}
	\end{itemize}	
\end{frame}
\begin{frame}{Knihovna http.server}

	from http.server import HTTPServer, BaseHTTPRequestHandler

	class MyHandler(BaseHTTPRequestHandler):

		# Definujeme metodu pro zpracování GET požadavků
		def do_GET(self):
			pass

	server = HTTPServer(("localhost", 8000), MyHandler)
	print("Server bezi na portu 8000...")
	server.serve_forever()

	\begin{itemize}
		\item Dva typy serverů:
		\begin{itemize}
			\item \texttt{http.server.HTTPServer(args)}.
			\item \texttt{http.server.ThreadingHTTPServer(args)}.
		\end{itemize}
		\item Argumenty \texttt{args}:
		\begin{itemize}
			\item \texttt{_server_address_} - dvojice IP adresa, port.
			\item \texttt{_RequestHandlerClass_} - zpracovává příchozí HTTP požadavky (např. GET, POST) a definuje, jak server na tyto požadavky odpoví.
		\end{itemize}
	\end{itemize}	
\end{frame}

\begin{frame}{Knihovna http.server}
	def do_GET(self):
		# Odeslání odpovědi s kódem 200 (OK)
		self.send_response(200)
		# Nastavení hlavičky Content-Type pro HTML obsah
		self.send_header("Content-type", "text/html") 
		self.end_headers()
		# Odeslání těla odpovědi – text "Hello, World!"     
		self.wfile.write(b"Hello, World!") 
\end{frame}

\subsection{RabbitMQ}
\begin{frame}{RabbitMQ}

\end{frame}

\subsection{Další nástroje}
\begin{frame}{Další nástroje}

\end{frame}

\end{document}